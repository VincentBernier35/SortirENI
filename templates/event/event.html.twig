{% extends 'base.html.twig' %}

{% block title %}
    Création
{% endblock %}

{% block body %}
    <h1>Créer une sortie</h1>
    <div class="tableE">
        {{ form_start(eventForm) }}
        {{ form_row(eventForm.name) }}
        {{ form_row(eventForm.startTime) }}
        {{ form_row(eventForm.deadLine) }}
        {{ form_row(eventForm.placeMax) }}
        <p>{{ form_row(eventForm.duration)}}minutes</p>
        {{ form_row(eventForm.info) }}
        {{ form_end(eventForm) }}
    </div>
    <div class="tableV">
        <p>Ville organisatrice : {{ user.site.name }}</p>
        {{ form_start(placeForm) }}
        {{ form_row(placeForm.city,  { 'attr': { 'class': 'city-select' } }) }}
        <label>Code postal : </label>
        <input type="text" id="zipcode" name="zipcode" class="zipcode" />
        {{ form_row(placeForm.name) }}
        {{ form_row(placeForm.street) }}
        <p>Latitude : {{ place.latitude }}</p>
        <p>Longitude : {{ place.longitude }}</p>
        {{ form_end(eventForm) }}
    </div><br>

    <div>
        <a href="{{ path('main_home') }}">
            <button type="submit" class="btn btn-primary ">Enregistrer</button>
        </a>
        <button type="submit" class="btn btn-primary ">Enregistrer</button>
        <button type="submit" class="btn btn-primary ">Annuler</button>
    </div>

    <script>
        var citySelect = document.querySelector('.city-select');
        var zipCodeInput = document.querySelector('.zipcode');
        citySelect.addEventListener('change', function() {
            var selectedCity = citySelect.options[citySelect.selectedIndex];
            zipCodeInput.value = selectedCity.dataset.zipcode;
            console.log(selectedCity);
            console.log(selectedCity.dataset.zipcode);
        });
    </script>
{% endblock %}

